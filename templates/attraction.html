<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <title>台北一日遊</title>
        <style type="text/css">
            @font-face {
                font-family:'Noto Sans TC';
                font-style: normal;
                font-weight: 700;
                src:url("https://fonts.googleapis.com/css?family=Noto+Sans+TC&display=swap&subset=chinese-traditional"),
            }
            html{
                height:100%;
                margin:0;
            }
            body{
                height: 100%;
                margin:0;
                display: flex; 
                flex-direction: column;
                font-size: 16px;
            }
            a {text-decoration:none;}
            a:visited {color:#666666;}
            .CS{
                flex-grow: 1;
            }
           .SPACE{
            height:32px;
            }
            .NavigationBar{
                font-family:'Noto Sans TC',serif;display:flex;width:1200px;justify-self: center;margin:auto;  font-size:16px;justify-content: center; 
                align-items: center; background-color:#FFFFFF;
            }
            .NB-SPACE{
                position:fixed;width:100%;background-color:#FFFFFF; top:0%;
            }
            .NBtitle{
                font-family:'Noto Sans TC',serif;flex:8;justify-self:start;font-size:1rem; font-size:1.5rem;color:#448899;font-weight: bolder;
                
            } 
            .NBitem{
                font-family:'Noto Sans TC',serif;display:flex;flex:1.2;justify-self:end;font-size:1rem; color:#666666;font-weight: bold;
                
            }
            .item{
                font-family:'Noto Sans TC',serif;flex:1;justify-self: end;text-align:center;color:#666666;
            }
            .topbox{
                width: 1200px; margin-right: auto;margin-left: auto;margin-top: 1%; display: flex;margin-buttom:2%; 
                
            }
            .picbox{
                flex:0.8;margin-right:2%;
            }
            .checkbox{
                flex:1;
            }
            .check_in_box{
                background-color: #E8E8E8;font-family:'Noto Sans TC',serif;color:#666666; border-radius: 5px;
            }
            .checkin{
                font-weight: bolder; margin:2%; padding-top: 10px;
            }
            .checkintrod{
                margin:2%; 
            }
            .checkday {
                margin:2%;
            }
            .time{
                margin:2%;
            }
            .much{
                margin:2%;
            }
            .introd{
                font-family:'Noto Sans TC',serif; color: #666666; margin:1%;padding-top: 1%;
            }
            .bottom-box{
                width: 1200px; margin-right: auto;margin-left: auto;margin-top: 1%;
            }
            .bt-boxtitle{
                font-weight: bolder;
            }
            .start{
                margin:2% 4% 2% 4%;
            }
            .start-bt{
                font-family:'Noto Sans TC',serif;background-color: #448899;color: #FFFFFF;width: 150px; height:36px ; border: 0px; border-radius: 5px;font-size: 1rem;
            }
            .block{
                display: inline-block;height:28px;
            }
            .name{
                font-family:'Noto Sans TC',serif;font-size:1.5rem;color: #666666;font-weight: bolder; margin-bottom: 1%;
            }
            .cart{
                font-family:'Noto Sans TC',serif;font-size:1rem;color: #666666; margin-bottom: 2%; margin-top: 2%;
            }
            .copy{
                width:100% ;background-color: #757575; 
                
            }
            .COPYRIGHT{
                font-family:'Noto Sans TC';text-align:center;  font-size:16px; color:#FFFFFF;font-weight: bolder;padding:20px;
            }
            .mypic{
                
                position:absolute; width: 520px; margin: 1px;overflow: hidden;
                
            }
            .imagelist{
                padding-left: 0;margin-top: 0;width: 1100px; position: relative;right:200px;transition:right .5s  ease-in-out;
            }
            .pic{
                width:520px;float: left;aspect-ratio:1.2/0.8 ;border-radius: 10px;margin-right:10px;
            }
            #imagelist{
                list-style:none; 
                
                
            }
            .mypic button{
                color: black;
                position: absolute;
                font-size: 25px;
                font-weight: bold;
                weight:36px;
                height:36px
                text-align:center;
                display: inline;
                border-radius: 50px;
                border:0px;
                Opacity:0.5;
            }
            .right_btn{
                top: 170px;
                right: 0;
                
                vertical-align: middle;
            }
            .left_btn{
                top: 170px;
                left: 0;
                vertical-align: middle;
            }
            .srcindex{
                position: absolute;
                top:93%;

            }
            .srcindex label{
                display:inline-block;
                width: 10px;
                height: 10px;
                background-color:#fff;
                border-radius: 50%;
                Opacity:0.5;
                border: #FFFFFF solid 1px;
                margin:0 2px;
            }
            .space2{
                display:none;
            }
            #line{
                color="#E8E8E8"  width=1200px;margin-top:1.7%; 
            }
            #topline{
                color="#E8E8E8" width=100%; margin-top:10px; SIZE=20px; 
            }
            @media screen and (max-width:1200px){
                .NavigationBar{width:90%;}
                .NBtitle{flex:6;}
                .SPACE{}
                .topbox{width:90%; }
                .mypic{width:400px;}
                .pic{width:400px;aspect-ratio:1.3/1;}
                .bottom-box{width:90%;}
                #line{
                    width:100%;
                }
                .checkbox{
                    flex:0.8;
                }
                .picbox{
                    flex:1;
                }
                .left_btn{top: 140px;}
                .right_btn{top: 140px;}
            }
            @media screen and (max-width:800px){
                .NBtitle{flex:1; z-index:2;}
                .topbox{width:100%;flex-direction:column;z-index: -1;}
                .picbox{width:360px;margin:auto;}
                .checkbox{width:90%;margin:auto;}
                .mypic{width:360px;}
                .pic{width:360px;aspect-ratio:1.3/1;}
                .space2{display:inline;width:360px;height:300px;margin:auto;
                }
                .bottom-box{
                    width:95%;
                }
                

            }
            }


        </style>
        <script type="text/javascript">
            function change(){

                let day=document.querySelector('[name=day]:checked').value
                
                if (day==1){
                    document.getElementById("ntw").innerHTML="2000"
                    
                }
                else{
                    document.getElementById("ntw").innerHTML="2500"
                    
                }
            }
        </script>
    </head>
    <body>
        <div class="CS">
            <div class="SPACE"></div>
            <div class="NB-SPACE">
                <div class="NavigationBar">  
                    <div class="NBtitle">台北一日遊</div>
                    <div class="NBitem">
                        <div class="item"><a href="/">預定行程</a></div>
                        <div class="item"><a href="/">登入/註冊</a></div>
                    </div>
                </div>
            </div>
            <hr  id="topline"color="#E8E8E8"   >
            <div class="topbox">
                <div class="picbox" id="picbox">
                    <div class="mypic" id="mypic">
                        <ul class="imagelist "id="imagelist">
                        </ul>
                        <button class="left_btn">
                            &lt;
                        </button>
                        <button class="right_btn">
                            &gt;
                        </button>
                        <div class="srcindex" id="srcindex">
                            
                        </div>

                    </div>
                </div>
                <div class="space2"></div>
                <div class="checkbox" id="checkbox">
                    <div class="name" id="name">平安鐘</div>
                    <div class="cart" id="cart">公共藝術at忠孝復興</div>
                    <div class="check_in_box">
                        <div class="checkin">訂購導覽行程</div>
                        <div class="checkintrod">以此景點為中心的一日行程，帶您探索城市角落故事</div>
                        <div class="checkday">選擇日期: <input id="date" type="date"></div>
                        <div class="time">選擇時間: <input type="radio" id="day"name="day" value=1 checked onclick="change()">上半天 <input type="radio" id="night"name="day" value=2 onclick="change()">下半天</div>
                        <div class="much">導覽費用: 新台幣 <span id="ntw">2000</span> 元</div>
                        <div class="start"><a href="/"><button class="start-bt">開始預訂行程</button></div></a>
                        <div class="block">   </div>
                    </div>
                </div>
            </div>
            <hr  id="line"color="#E8E8E8"  width=1200px >
            <div class="bottom-box">
                <div class="introd" id="description">平安鐘祈求大家的平安，這是為了紀念921地震週年的設計，在喧鬧的廣場上每個小時鳴鐘，保佑平安，祈禱臺灣不會再發生這樣的天災。雙手合十加上108個黃色的琉璃乳丁，隨著緩緩流下的水，在底下的一個小噴泉噴出。雙手合十的意義，一個是祈福，一個是包容，教我們要包容這樣的改變，撫平這樣的傷口。下面的水緩緩流出，代表著人的生命力是不斷地延續下去。緩緩地鐘聲，卻帶來心中的寧靜。 這個平安鐘是由建築師姚仁喜與琉璃創作家王俠軍共同設計，長6公尺、寬5公尺，以鑄銅製成，由法鼓山文教基金會全額出資。平安鐘點綴都市景觀，不時提醒大家，面對刻骨銘心的災難痛苦，更應該有謙卑的一顆心。</div>
                <div class="introd">
                    <div class="bt-boxtitle" id="address-title">景點地址:</div>
                    <div  id="address" >臺北市 大安區忠孝東路4段</div>
                </div>
                <div class="introd">
                    <div class="bt-boxtitle" id="transport-title">交通方式:</div>
                    <div  id="transport">捷運站名：忠孝復興站4號出口1.公車：204、212、212直、232、232副、262、262(區間)、278、299、521、605、605(副)、605(新台五線)、667、903、忠孝新幹線至頂好市場站 2.車位：太平洋崇光百貨地下停車場或市民大道附近地下停車場</div>
                </div>
            </div>
        </div>
        <div class="copy"><div class="COPYRIGHT" id="COPYRIGHT">COPYRIGHT © 2021 台北一日遊</div>
        
    </body>
    <script>    
    function delay(n){
        return new Promise(function(resolve){
            setTimeout(resolve,n*1000);
            });
        }
    function indexnext(now,pre){
        let index=document.querySelector("#index"+now);
        let index_pre=document.querySelector("#index"+pre);
        index.style.backgroundColor="black";
        index_pre.style.backgroundColor="#FFFFFF";
        
    }
    let now_url=window.location.href
    let new_url=now_url.split('/');
    let id=new_url.pop();
    let left_btn = document.querySelector(".left_btn")
    let right_btn = document.querySelector('.right_btn')
    let max_img=0
    async function getdata(){
        let api_url="/api/attraction/"+id
        let api_response= await fetch(api_url)
        let data=await api_response.json()
        let my_result=await data.data
        let address=await my_result.address
        let name=await my_result.name
        let mrt=await my_result.mrt
        let category=await my_result.category
        let transport=await my_result.transport
        let introd=await my_result.description
        document.getElementById("name").innerHTML=name
        document.getElementById("address").innerHTML=address
        document.getElementById("cart").innerHTML=category+" at "+mrt
        document.getElementById("description").innerHTML=introd
        document.getElementById("transport").innerHTML=transport
        let images=await my_result.images
        let image_much=await images.length
        max_img=await image_much-1
        let imgindex=document.getElementById("srcindex")
        await delay(0.3)
        for (i in images){
            let lu=document.getElementById("imagelist");
            let lu2=document.querySelector('.imagelist')
            lu.style.width=String(530*image_much)+"px"
            let elment=document.createElement("li");
            let image=document.createElement("img");
            let index=document.createElement("label");
            index.setAttribute("id","index"+i);
            image.setAttribute("src",images[i]);
            image.setAttribute("id","src"+String(i));
            image.setAttribute("alt","圖片載入失敗，請重新整理");
            image.setAttribute("data-src",images[i]);     
            image.setAttribute("class","pic");
            elment.appendChild(image);
            lu.appendChild(elment);
            lu2.style.right="0";
            imgindex.appendChild(index)
            
        }
        let mypic=document.getElementById("mypic");
        imgindex.style.left=(mypic.offsetWidth - imgindex.offsetWidth)/2+"px";
        let first=document.querySelector("#index0");
        first.style.backgroundColor="black";    
        let  pichight =document.getElementById("mypic").offsetHeight
        console.log(pichight)
    
        
        
    }
    let mypic=0

    
    let pidwid=0;
    let mixscreen=0;
    let screen=document.documentElement.scrollWidth
    if (screen>1200){
         pidwid=530;
    }
    else if (361<screen<800){
         pidwid=370;
         mixscreen=1;
    }
    else if (360<screen){
        pidwid=370;
        
    }
    else{
        pidwid=410;
    }

   
    left_btn.onclick=function(){
        let nowpic=document.querySelector('.imagelist')
        if (mypic==0){
            nowpic.style.transition="none";
            mypic=max_img
            nowpic.style.right=String(pidwid*mypic)+"px";
            indexnext(mypic,0)
        }
        else{
            nowpic.style.transition="right .5s  ease-in-out";
            mypic=mypic-1
                
            nowpic.style.right=String(pidwid*mypic)+"px";
                
                
                
            indexnext(mypic,mypic+1)
        }
            
    }
    right_btn.onclick=function(){
        let nowpic=document.querySelector('.imagelist')
        if (mypic==max_img){
            mypic=0;
            nowpic.style.transition="none";
            nowpic.style.right=String(pidwid*mypic)+"px";
            indexnext(0,max_img)
                
        }
        else{
            nowpic.style.transition="right .5s  ease-in-out";
            mypic=mypic+1
            nowpic.style.right=String(pidwid*mypic)+"px";
            indexnext(mypic,mypic-1)
                
        }
    
    }
    
 

    
    
    getdata();
    </script>     
</html>
